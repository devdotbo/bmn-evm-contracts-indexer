# v2.2.0 Factory Upgrade Summary

## Date: Configuration updated for v2.2.0 factory with PostInteraction capability

### Changes Made

#### 1. Updated ponder.config.ts
- **Factory Address**: Changed from v2.1.0 (0xBc9A20A9FCb7571B2593e85D2533E10e3e9dC61A) to v2.2.0 (0xB436dBBee1615dd80ff036Af81D8478c1FF1Eb68)
- **Factory ABI**: Updated to use CrossChainEscrowFactoryV2_2.json
- **Contract Name**: Changed from `CrossChainEscrowFactoryV2` to `CrossChainEscrowFactoryV2_2`
- **Start Blocks**: Maintained existing blocks (Base: 33809842, Optimism: 139404873)

#### 2. Added 1inch SimpleLimitOrderProtocol
- **Address**: 0x111111125421ca6dc452d28d826b88f5ccd8c793 (same on both chains)
- **Purpose**: Track OrderFilled events for PostInteraction escrow creation
- **Start Blocks**: Aligned with factory v2.2.0 blocks

#### 3. ABI Updates
- Added CrossChainEscrowFactoryV2_2.json with PostInteractionEscrowCreated event
- Wrapped the ABI in `{"abi": [...]}` format for Ponder compatibility
- SimpleLimitOrderProtocol.json already exists with OrderFilled event

### New Events Available

#### Factory v2.2.0 Events
- PostInteractionEscrowCreated (NEW) - Tracks escrows created via 1inch limit orders
- SrcEscrowCreated
- DstEscrowCreated
- OwnershipTransferred
- MakerWhitelisted/MakerRemoved
- ResolverWhitelisted/ResolverRemoved
- EmergencyPause

#### SimpleLimitOrderProtocol Events
- OrderFilled - Tracks when limit orders are executed
- OrderCancelled
- BitInvalidatorUpdated
- EpochIncreased

### Verification
Run the verification script to confirm configuration:
```bash
node scripts/check-v2.2-config.mjs
```

### Next Steps
1. Update src/index.ts to add event handlers for:
   - PostInteractionEscrowCreated
   - OrderFilled (if needed for tracking)
2. Update ponder.schema.ts if new tables are needed for PostInteraction data
3. Run `pnpm run codegen` after schema changes
4. Test with `pnpm run dev`

### Technical Notes
- WebSocket and HTTP transports remain configured for real-time updates
- Multi-chain setup preserved for Base (8453) and Optimism (10)
- BMN Token tracking configuration unchanged
- Environment variables (ANKR_API_KEY, DATABASE_URL) remain the same